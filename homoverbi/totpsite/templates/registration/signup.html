{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="card">
  <h2>Signup (TOTP обовʼязковий)</h2>

  <p style="margin-top:0;">1) Додай цей QR у Google Authenticator / Aegis / etc.</p>
  <div style="display:flex; gap:16px; align-items:center; flex-wrap:wrap;">
    <img src="{{ qr_data }}" alt="TOTP QR" style="width:180px; height:180px; image-rendering:pixelated;" />
    <div>
      <div style="font-size:14px; opacity:.85;">Або введи secret вручну:</div>
      <code style="display:inline-block; padding:8px 10px; border-radius:10px; background:#f4f4f5;">{{ secret }}</code>
      <div style="font-size:12px; opacity:.7; margin-top:6px;">Запис типу: <code>TOTP</code>, 6 цифр, крок 30с</div>
    </div>
  </div>

  <hr style="margin:16px 0; opacity:.25;" />

  <p>2) Заповни форму. Реєстрація неможлива без прийняття Користувацької згоди.</p>

  <form method="post">
    {% csrf_token %}
    <div class="row">
      <label>Username<br><input name="username" autocomplete="username" required></label>
      <label>Password<br><input name="password1" type="password" autocomplete="new-password" required></label>
      <label>Repeat password<br><input name="password2" type="password" autocomplete="new-password" required></label>
      <label>TOTP (6 цифр)<br><input name="token" inputmode="numeric" pattern="[0-9]{6}" placeholder="123456" required></label>
    </div>

    <div style="margin:12px 0; padding:10px; border:1px solid #ccc; border-radius:8px;">
      <div style="margin-bottom:8px;">
        <a href="{% static 'accounts/eula.pdf' %}" target="_blank" rel="noopener">Відкрити Користувацьку згоду (PDF)</a>
      </div>
      <label style="display:flex; gap:8px; align-items:flex-start;">
        <input type="checkbox" name="accept_eula" required>
        <span>Я прочитав(ла) та приймаю умови Користувацької згоди (EULA).</span>
      </label>
    </div>

    <button type="submit">Створити акаунт</button>
  </form>

  <p style="margin-top:12px;">Вже є акаунт? <a href="/accounts/login/">Login</a></p>
</div>
{% endblock %}
